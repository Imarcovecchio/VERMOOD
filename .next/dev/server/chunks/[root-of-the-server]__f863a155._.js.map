{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/ignacio/vermut-landing/app/api/create-preference/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n\n    console.log(\"[v0] Datos recibidos:\", body)\n\n    const baseUrl = process.env.BASE_URL\n\n    const preference = {\n      items: [\n        {\n          title: body.plan,\n          quantity: 1,\n          currency_id: \"ARS\",\n          unit_price: 1000,\n        },\n      ],\n      back_urls: {\n    success: `${baseUrl}${process.env.SUCCESS_PATH}`,\n    failure: `${baseUrl}${process.env.FAILURE_PATH}`,\n    pending: `${baseUrl}${process.env.PENDING_PATH}`,\n  },\n\n      auto_return: \"approved\",\n    }\n\n    const response = await fetch(\n      \"https://api.mercadopago.com/checkout/preferences\",\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${process.env.MERCADOPAGO_ACCESS_TOKEN}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(preference),\n      }\n    )\n\n    const data = await response.json()\n\n    console.log(\"[v0] Respuesta MP:\", data)\n\n    if (!response.ok) {\n      throw new Error(\"Error en Mercado Pago: \" + JSON.stringify(data))\n    }\n\n    return NextResponse.json({\n      id: data.id,\n      init_point: data.init_point,\n    })\n\n  } catch (error: any) {\n    console.error(\"[v0] Error crear preferencia:\", error)\n\n    return NextResponse.json(\n      { error: error.message },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,QAAQ,GAAG,CAAC,yBAAyB;QAErC,MAAM,UAAU,QAAQ,GAAG,CAAC,QAAQ;QAEpC,MAAM,aAAa;YACjB,OAAO;gBACL;oBACE,OAAO,KAAK,IAAI;oBAChB,UAAU;oBACV,aAAa;oBACb,YAAY;gBACd;aACD;YACD,WAAW;gBACb,SAAS,GAAG,UAAU,QAAQ,GAAG,CAAC,YAAY,EAAE;gBAChD,SAAS,GAAG,UAAU,QAAQ,GAAG,CAAC,YAAY,EAAE;gBAChD,SAAS,GAAG,UAAU,QAAQ,GAAG,CAAC,YAAY,EAAE;YAClD;YAEI,aAAa;QACf;QAEA,MAAM,WAAW,MAAM,MACrB,oDACA;YACE,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,wBAAwB,EAAE;gBAC/D,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAGF,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,QAAQ,GAAG,CAAC,sBAAsB;QAElC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,4BAA4B,KAAK,SAAS,CAAC;QAC7D;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,IAAI,KAAK,EAAE;YACX,YAAY,KAAK,UAAU;QAC7B;IAEF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,iCAAiC;QAE/C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO;QAAC,GACvB;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}